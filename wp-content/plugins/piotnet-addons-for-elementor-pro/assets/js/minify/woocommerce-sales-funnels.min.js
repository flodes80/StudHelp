!function(e,a){var t,r=e.jQuery||e.Cowboy||(e.Cowboy={});r.throttle=t=function(e,t,d,o){function i(){function r(){l=+new Date,d.apply(c,f)}function i(){s=a}var c=this,n=+new Date-l,f=arguments;o&&!s&&r(),s&&clearTimeout(s),o===a&&n>e?r():!0!==t&&(s=setTimeout(o?i:r,o===a?e-n:e))}var s,l=0;return"boolean"!=typeof t&&(o=d,d=t,t=a),r.guid&&(i.guid=d.guid=d.guid||r.guid++),i},r.debounce=function(e,r,d){return d===a?t(e,r,!1):t(e,d,!1!==r)}}(this),jQuery(document).ready(function(e){function a(a){if(""==a)var t=e(document).find("[data-pafe-woocommerce-checkout-form-id]");else var t=e(document).find('[data-pafe-woocommerce-checkout-form-id="'+a+'"]');t.length>0&&t.each(function(){var a=e(this).attr("data-pafe-woocommerce-checkout-form-id"),t=e(document).find("[data-pafe-form-builder-form-id="+a+"]"),r=[],d=new FormData,o=e(this);o.closest(".elementor-element");t.each(function(){if(void 0==e(this).data("pafe-form-builder-stripe")&&void 0==e(this).data("pafe-form-builder-html")){var t=e(this).closest(".elementor-field-type-checkbox.elementor-field-required");t.length>0&&t.find("input[type=checkbox]:checked").length,e(this).closest(".elementor-field-group").find("[data-pafe-form-builder-required]").html("");var d=e(this).attr("type"),o=e(this).attr("name"),i=e(this).closest("[data-pafe-form-builder-repeater-form-id]"),s="",l="",c="",n=-1,f=0;if(i.length>0){$repeaterParents=e(this).parents("[data-pafe-form-builder-repeater-form-id]"),l=i.data("pafe-form-builder-repeater-id"),$repeaterParents.each(function(){var t=e(this).data("pafe-form-builder-repeater-id"),r=e(document).find('[data-pafe-form-builder-repeater-form-id="'+a+'"][data-pafe-form-builder-repeater-id="'+t+'"]');repeaterParentIndex=e(this).index()-r.index(),s+=t+"|index"+repeaterParentIndex+"|"+o.replace("[]","").replace("form_fields[","").replace("]","")+","}),c=i.data("pafe-form-builder-repeater-label");var m=e(document).find('[data-pafe-form-builder-repeater-id="'+i.data("pafe-form-builder-repeater-id")+'"]');f=i.siblings('[data-pafe-form-builder-repeater-id="'+i.data("pafe-form-builder-repeater-id")+'"]').length+1,n=i.index()-m.index()}if(-1!==o.indexOf("[]")){var p=[];if("checkbox"==d)e(this).closest(".elementor-element").find('[name="'+o+'"]:checked').each(function(){p.push(e(this).val())});else if(null==(p=e(this).val()))var p=[];g="";for(var u="",h=0;h<p.length;h++){if(void 0!=e(this).data("pafe-form-builder-send-data-by-label")){var b=p[h];if("checkbox"==d){var v=e(this).closest(".elementor-element").find('[value="'+b+'"]');v.length>0&&(u+=v.data("pafe-form-builder-send-data-by-label")+",")}else{var v=e(this).find('[value="'+b+'"]');v.length>0&&(u+=v.html()+",")}}g+=p[h]+","}g=g.replace(/,(\s+)?$/,"")}else if("radio"==d||"checkbox"==d){if(void 0!=e(this).data("pafe-form-builder-send-data-by-label"))var u=e(this).closest(".elementor-element").find('[name="'+o+'"]:checked').data("pafe-form-builder-send-data-by-label");var g=e(this).closest(".elementor-element").find('[name="'+o+'"]:checked').val()}else if(void 0!=e(this).data("pafe-form-builder-calculated-fields"))var g=e(this).siblings(".pafe-calculated-fields-form").text();else{if(void 0!=e(this).data("pafe-form-builder-send-data-by-label")){var b=e(this).val().trim(),v=e(this).find('[value="'+b+'"]');v.length>0&&(u=v.html())}var g=e(this).val().trim()}if(void 0!=g){var _={};_.label=e(this).closest(".elementor-field-group").find(".elementor-field-label").html(),_.name=o.replace("[]","").replace("form_fields[","").replace("]",""),_.value=g,""!=u&&(_.value_label=u),e(this).closest(".elementor-field-type-calculated_fields").length>0&&(_.calculation_results=e(this).val().trim()),e(this).closest(".elementor-widget").hasClass("pafe-form-builder-conditional-logic-hidden")||(_.repeater_id=s,_.repeater_id_one=l,_.repeater_label=c,_.repeater_index=n,_.repeater_length=f,r.push(_))}}}),d.append("action","pafe_ajax_form_builder_woocommerce_checkout"),d.append("fields",JSON.stringify(r)),d.append("form_id",e(this).attr("data-pafe-woocommerce-checkout-id")),void 0!=e(this).closest("[data-elementor-id]")?d.append("post_id",e(this).closest("[data-elementor-id]").attr("data-elementor-id")):d.append("post_id",e(this).attr("data-pafe-woocommerce-checkout-post-id")),d.append("product_id",e(this).attr("data-pafe-woocommerce-checkout-product-id")),e.ajax({url:e("[data-pafe-ajax-url]").data("pafe-ajax-url"),type:"POST",data:d,processData:!1,contentType:!1,success:function(a){"1"==a.trim()&&(e("body").trigger("update_checkout"),e("body").trigger("wc_update_cart"))}})})}e(document).on("keyup change","[data-pafe-form-builder-form-id]",e.debounce(700,function(){a(e(this).attr("data-pafe-form-builder-form-id"))})),e(window).on("load",function(){a()}),e(document).on("click","[data-pafe-woocommerce-sales-funnels-add-to-cart]",function(a){a.preventDefault();var t=e(this);t.css("opacity","0.5"),t.find("[data-pafe-woocommerce-sales-funnels-add-to-cart-message]").remove();var r=e(this).attr("data-pafe-woocommerce-sales-funnels-add-to-cart"),d=JSON.parse(r);e.ajax({url:e("[data-pafe-ajax-url]").data("pafe-ajax-url"),type:"POST",data:{action:"pafe_ajax_woocommerce_sales_funnels_add_to_cart",options:d},success:function(a){t.css("opacity","1"),1==JSON.parse(a).status?(t.append('<div data-pafe-woocommerce-sales-funnels-add-to-cart-message class="pafe-woocommerce-sales-funnels-add-to-cart-message pafe-woocommerce-sales-funnels-add-to-cart-message--success">'+d.message_success+"</div>"),e("body").trigger("update_checkout"),e("body").trigger("wc_update_cart")):(t.append('<div data-pafe-woocommerce-sales-funnels-add-to-cart-message class="pafe-woocommerce-sales-funnels-add-to-cart-message pafe-woocommerce-sales-funnels-add-to-cart-message--out-of-stock">'+d.message_out_of_stock+"</div>"),e("body").trigger("update_checkout"),e("body").trigger("wc_update_cart"))}})})});